<odoo>
  <data>
    <!-- Available trips -->

    <record model="ir.ui.view" id="carpooling.available_trips">
      <field name="name">carpooling available trips</field>
      <field name="model">carpooling.vehicle_trip</field>
      <field name="arch" type="xml">
        <tree create="false" export_xlsx="false">
          <field name="driver"/>
          <!-- <field name="is_current_user"/> -->
          <field name="vehicle_type"/>
          <field name="departure_time"/>
          <field name="departure_loc"/>
          <field name="destination_loc"/>
          <field name="remaining_seats"/>
          <field name="description"/>
          <button name="book_or_cancel" type="object" string="Book trip" class="oe_highlight"/>
        </tree>
      </field>
    </record>

    <!-- <record id="tree_id" model="ir.actions.act_window.view"> 
      <field eval="3" name="sequence"/> 
      <field name="view_mode">tree</field> 
      <field name="view_id" ref="tree_view_id"/> 
      <field name="act_window_id" ref="action_id"/> 
    </record> -->

    <record model="ir.ui.view" id="carpooling.available_trip_form">
      <field name="name">carpooling form</field>
      <field name="model">carpooling.vehicle_trip</field>
      <field name="arch" type="xml">
        <form string="Trip info" create="false" edit="false" delete="false" duplicate="false">
          <group colspan="4">
              <group colspan="2" col="2">
                  <separator string="Required fields" colspan="2"/>
                  <field name="driver" readonly="1"/>
                  <field name="departure_time" required="1"/>
                  <field name="departure_loc" required="1"/>
                  <field name="destination_loc" required="1"/>
                  <field name="available_seats" required="1"/>
              
                  <separator string="Optional" colspan="2"/>
                  <field name="vehicle_type"/>
                  <field name="description"/>

                  <notebook colspan="4">
                    <page string="Map">
                        <field name="description"/>
                    </page>
                    <page string="Location pictures">
                        <field name="description"/>
                    </page>
                    <page string="Passengers">
                        <tree create="false" edit="false" delete="false">
                          <field name="passengers" readonly="1"/>
                        </tree>
                    </page>
                    <page string="Vehicle pictures">
                        <field name="description"/>
                    </page>
                  </notebook>
              </group>
          </group>
        </form>
      </field>
    </record>

    <record model="ir.ui.view" id="carpooling.trip_search">
      <field name="name">carpooling trip search</field>
      <field name="model">carpooling.vehicle_trip</field>
      <field name="arch" type="xml">
        <search>
          <field name="departure_time"/>
          <field name="departure_loc"/>
          <field name="destination_loc"/>
          <field name="remaining_seats"/>
        </search>
      </field>
    </record>

    <!-- Your trips -->

    <record model="ir.ui.view" id="carpooling.your_trips">
      <field name="name">carpooling your trips</field>
      <field name="model">carpooling.vehicle_trip</field>
      <field name="arch" type="xml">
        <tree export_xlsx="false">
          <field name="driver" readonly="1"/>
          <!-- <field name="driver_uid"/>
          <field name="is_current_user"/> -->
          <field name="vehicle_type"/>
          <field name="departure_time"/>
          <field name="departure_loc"/>
          <field name="destination_loc"/>
          <field name="remaining_seats"/>
          <field name="description"/>
        </tree>
      </field>
    </record>

    <!-- <record id="show_current_user_as_driver" model="ir.rule">
        <field name="name">Show only trips where the current user is the driver</field>
        <field name="model_id" ref="carpooling.vehicle_trip"/>
        <field name="perm_read" eval="False"/>
        <field name="groups" eval="[Command.link(ref('base.group_user'))]"/>
        <field name="domain_force">[
            '|', ('driver', '!=', user.id),
                ('user_id', '=', False)
        ]</field>
    </record> -->

    <record model="ir.ui.view" id="carpooling.your_trip_form">
      <field name="name">carpooling form</field>
      <field name="model">carpooling.vehicle_trip</field>
      <field name="arch" type="xml">
        <form string="Trip form">
          <group colspan="4">
              <group colspan="2" col="2">
                  <separator string="Required fields" colspan="2"/>
                  <field name="driver"/>
                   <!-- readonly="1"/> -->
                  <field name="departure_time" required="1"/>
                  <field name="departure_loc" required="1"/>
                  <field name="destination_loc" required="1"/>
                  <field name="available_seats" required="1"/>

                  <separator string="Optional" colspan="2"/>
                  <field name="vehicle_type"/>
                  <field name="description"/>

                  <notebook colspan="4">
                    <page string="Passengers">
                        <tree>
                          <field name="passengers"/>
                        </tree>
                    </page>
                    <page string="Vehicle pictures">
                        <field name="description"/>
                    </page>
                    <page string="Location pictures">
                        <field name="description"/>
                    </page>
                    <page string="Map">
                        <field name="description"/>
                    </page>
                  </notebook>
              </group>
          </group>
        </form>
      </field>
    </record>

    <!-- actions opening views on models -->

    <record model="ir.actions.act_window" id="carpooling.show_available_trips">
      <field name="name">Available trips</field>
      <field name="res_model">carpooling.vehicle_trip</field>
      <!-- <field name="view_id" ref="carpooling.available_trips"/> -->
      <!-- <field name="views">[("carpooling.available_trips", "tree"), ("carpooling.available_trip_form", "form")]</field> -->
      <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('carpooling.available_trips')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('carpooling.available_trip_form')})]"
      />
      <!-- <field name="view_mode">tree,form</field> -->
      <field name="domain">[('driver_uid', '!=', uid)]</field>
    </record>

    <record model="ir.actions.act_window" id="carpooling.show_your_trips">
      <field name="name">Your trips</field>
      <field name="res_model">carpooling.vehicle_trip</field>
      <!-- <field name="view_id" ref="carpooling.your_trips"/> -->
      <!-- <field name="views">[("carpooling.your_trips", "tree"), ("carpooling.your_trip_form", "form")]</field> -->
      <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('carpooling.your_trips')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('carpooling.your_trip_form')})]"
      />
      <!-- <field name="view_mode">tree,form</field> -->
      <field name="domain">[('driver_uid', '=', uid)]</field>
    </record>

    <!-- <record id="zehjbvizcvbzevboz" model="ir.rule">
      <field name="name">Show</field>
      <field name="model_id" ref="model_carpooling_vehicle_trip" />
      <field name="perm_read" eval="0" />
      <field name="perm_write" eval="0" />
      <field name="perm_create" eval="0" />
      <field name="perm_unlink" eval="0" />
      <field name="domain_force">[('driver', '=', user)]</field>
    </record> -->

    <!-- <record id="hide" model="ir.rule">
      <field name="name">Hide</field>
      <field name="model_id" ref="model_carpooling_vehicle_trip" />
      <field name="groups" eval="[(4, ref('base.group_user'))]" />
      <field name="perm_read" eval="0" />
      <field name="perm_write" eval="0" />
      <field name="perm_create" eval="0" />
      <field name="perm_unlink" eval="0" />
      <field name="domain_force">[('driver', '!=', user)]</field>
    </record> -->

    <!-- Top menu item -->

    <menuitem name="Carpooling" id="carpooling.menu_root"/>

    <!-- menu categories -->

    <!-- <menuitem name="Trips" id="carpooling.menu_1" parent="carpooling.menu_root"/> -->

    <!-- actions -->

    <menuitem name="Available trips" id="carpooling.menu_1_available_trips" parent="carpooling.menu_root"
              action="carpooling.show_available_trips"/>
    <menuitem name="Your trips" id="carpooling.menu_1_your_trips" parent="carpooling.menu_root"
              action="carpooling.show_your_trips"/>

  </data>
</odoo>